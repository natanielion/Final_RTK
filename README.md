Проект по тестированию форм регистрации / авторизации / восстановления пароля для ЕЛК Web Ростелеком (https://lk.rt.ru/).

Связанные тест-кейсы, по которым создавались автоматизированные проверки: https://docs.google.com/spreadsheets/d/16yP8OrmIrury4c6LEd2DxAaPC-NupKaud7Z73XCoD6o/edit?usp=sharing

Всего в проекте реализовано тестов: 20

Из них с параметризацией: 4

Файл **auth_data.py** содержит авторизационные данные.

Файл **test_data_registration.py** содержит тестовые данные для сценариев тестирования формы регистрации (включая данные для 
параметризации тестов регистрации).

Файлы в папке **pages** содержат локаторы и функции для каждой из тестируемых страниц.

Файл **conftest.py** содержит фикстуры с web driver и всеми используемыми страницами для минимизации импорта в файлах с тестами

Для работы с файлами тестов потребуется файл .env, который должен находиться в корневом каталоге проекта, внутри него должно быть:

valid_email = 'email, зарегистрированный в системе'

valid_password = 'валидный пароль для аккаунта с почтой'

valid_phone = 'телефон, зарегистрированный в системе'

valid_password_for_phone = 'валидный пароль для аккаунта с телефоном'

valid_login = 'логин, зарегистрированный в системе'

new_valid_password = 'валидный пароль для почты после его изменения в тест-кейсе TC-RESET-PWD-03'


Для установки требуемых пакетов для данного проекта нужно ввести команду:
`pip install -r requirements.txt`

-------------------------------------------------------------------------
Проект состоит из 4-х тестовых файлов:

### 1) **test_auth_page_with_code.py** - тестирование страницы авторизации по одноразовому коду. В данный файл входят следующие тестовые сценарии:

**test_auth_with_code_page_has_correct_structure:** Проверка, что на странице авторизации по коду присутствуют все 
требуемые элементы: подсказка по работе с формой (Укажите контактный номер телефона или почту, на которые необходимо 
отправить код подтверждения), поле ввода номера телефона или почты, а также кнопка "Получить код". Тест относится к 
группам **_"positive"_** и **_"structure"_**
    
**test_code_confirmation_page_has_correct_structure:** Проверка, что на странице ввода кода подтверждения при 
авторизации по корректному формату почты присутствуют все требуемые элементы: почта, на которую был выслан код, 
ссылка "Изменить почту", шесть отдельных полей для ввода кода подтверждения, текст с обратным отсчетом времени до 
повторной попытки отправить код. Тест относится к группе **_"captcha"_**
    
**test_incorrect_password_alert_with_incorrect_data:** Тест, который проверяет поле формы "E-mail или мобильный телефон" 
на корректность обработки исключений, а также проверяет, что при некорректном заполнении поля выводится соответствующая 
подсказка. Относится к группе **_"negative"_**

**test_change_email_on_code_confirmation_page:** Проверка, что при вводе почты и запроса кода авторизации на нее и затем 
нажатия на кнопку "Изменить почту" происходит возврат к форме авторизации по коду и под полем для ввода почты или номера 
телефона появляется текст с отсчетом времени до возможности повторной отправки кода доступа. 
Относится к группе **_"captcha"_**


_Запустить все тесты данного файла можно по команде:_ 
    `python -m pytest test_auth_page_with_code.py`

### 2) **test_auth_page_with_password.py** - тестирование страницы авторизации с паролем

**test_full_auth_page_has_correct_structure:** Проверка, что страница регистрации по номеру телефона/почте/логину или 
ЛС имеет структуру, соответствующую требованиям, и на ней присутствуют все необходимые поля, ссылки и элементы: страница 
поделена на две части, в правой части есть меню выбора типа аутентификации (автоматически выбран тип "Телефон"), есть 
форма ввода логина/телефона/почты/лицевого счета, есть форма ввода пароля, чекбокс "Запомнить меня", ссылка "Забыл 
пароль", кнопка "Войти", кнопка "Войти по временному коду" и есть вспомогательная информация. В левой части есть 
продуктовый слоган ЛК Ростелеком, вспомогательная информация для клиента "Помощь". Относится к группам **_"positive"_** и **_"structure"_**

**test_auth_tab_switched_to_relevant_for_input:** Проверка, что при выбранном по умолчанию табе типа аутентификации 
"Телефон" и вводе в поле "Мобильный телефон" логина, таб аутентификации автоматически переключается на "Логин". 
Относится к группе **_"positive"_**

**test_elk_page_opens_with_correct_phone_and_password:** Проверка, что при вводе корректного зарегистрированного в 
системе телефона и соответствующего ему пароля, после нажатия на кнопку "Войти" происходит переход на страницу ЕЛК Web. 
Здесь возможно появление капчи, поэтому добавлена проверка на ее наличие и в случае, если капча есть, добавляется 
задержка 15 секунд после ввода пароля для ее ручного ввода с клавиатуры. Относится к группе **_"captcha"_**

**test_not_redirect_to_elk_page_with_incorrect_pwd_shows_message:** Проверка, что при вводе корректного 
зарегистрированного в системе логина, к которому привязана только почта, и некорректного пароля не происходит переход 
переход на страницу ЕЛК Web, над формой аутентификации появляется соответствующее сообщение и кнопка "Забыл пароль" 
меняет цвет на оранжевый. Здесь возможно появление капчи, поэтому добавлена проверка на ее наличие и в случае, если 
капча есть, добавляется задержка 15 секунд после ввода пароля для ее ручного ввода с клавиатуры. 
Относится к группе **_"captcha"_**

**test_not_redirect_to_elk_page_with_unregistered_email_shows_message:** Проверка, что при попытке входа по 
незарегистрированному в системе email и реальному паролю от действующей учетной записи не происходит переход переход на 
страницу ЕЛК Web, над формой аутентификации появляется соответствующее сообщение и кнопка "Забыл пароль" меняет цвет на 
оранжевый. Здесь возможно появление капчи, поэтому добавлена проверка на ее наличие и в случае, если капча есть, 
добавляется задержка 15 секунд после ввода пароля для ее ручного ввода с клавиатуры. Относится к группе **_"captcha"_**

_Запустить все тесты данного файла можно по команде:_
`python -m pytest test_auth_page_with_password.py`

### 3) **test_pwd_recovery_page.py** - тестирование страницы восстановления пароля

**test_pwd_recovery_page_has_correct_structure:** Проверка, что страница восстановления пароля открывается и содержит в 
себе все требуемые элементы: 4 таба выбора метода восстановления пароля (телефон, почта, логин, лицевой счет), форму 
ввода, картинку с капчей, форму для ввода капчи, кнопку "Продолжить" и кнопку "Вернуться". 
Относится к группам **_"positive"_** и **_"structure"_**

**test_recovery_method_choose_page_for_login_opens_with_correct_structure:** Проверка, что при вводе зарегистрированного в 
системе логина, к которому привязана и почта, и телефон, происходит переход на страницу с выбором метода восстановления 
пароля: по телефону или по почте. На странице присутствуют две радиокнопки с названиями методов восстановления, кнопка 
"Продолжить" и кнопка "Вернуться назад". В тесте требуется ручной ввод капчи, на который заложено 15 секунд. 
Относится к группе **_"captcha"_**

_Запустить все тесты данного файла можно по команде:_
`python -m pytest test_pwd_recovery_page.py`

### 4) **test_registration_page_py** - тестирование страницы регистрации

**test_registration_page_has_correct_structure:** Проверка, что при нажатии на кнопку "Зарегистрироваться" открывается 
соответствующая страница, которая имеет требуемую структуру: она разделена на две части - в правой части есть форма 
регистрации с 6 полями (имя, фамилия, выбор региона, email/телефон, пароль, подтверждение пароля), в левой части есть 
логотип компании и продуктовый слоган. Относится к группам **_"positive"_** и **_"structure"_**

**test_get_to_email_confirmation_page:** Проверка, что с корректно заполненными полями в форме регистрации происходит 
переход на страницу с ожиданием кода подтверждения, отправленного на почту, указанную при регистрации. Относится к 
группам **_"positive"_**, **_"redirect"_** и **_"structure"_**

**test_get_to_phone_confirmation_page:** Проверка, что с корректно заполненными полями в форме регистрации происходит 
переход на страницу с ожиданием кода подтверждения, отправленного на номер телефона, указанный при регистрации. 
Относится к группам **_"positive"_**, **_"redirect"_** и **_"structure"_**

**test_not_redirect_to_email_confirmation_with_incorrect_name_field:** Тест, который проверяет текстовые поля формы (на 
примере поля "Имя") на корректную обработку исключений, а также проверяет, что с некорректно заполненными полями в форме 
регистрации при нажатии на кнопку"Зарегистрироваться" не происходит переход на страницу подтверждения email и выводится 
соответствующее предупреждение под полем. Относится к группе **_"negative"_**, в тесте используется параметризация.

**test_not_redirect_to_email_confirmation_with_incorrect_email_and_phone_field:** Тест, который проверяет поле формы 
"E-mail или мобильный телефон" на корректность обработки исключений, а также проверяет, что с некорректно заполненными 
полями в форме регистрации при нажатии на кнопку"Зарегистрироваться" не происходит переход на страницу подтверждения 
email и выводится соответствующее предупреждение под полем. Относится к группе **_"negative"_**, в тесте используется 
параметризация. 

**test_not_redirect_to_email_confirmation_with_incorrect_password_field:** Тест, который проверяет поле "Пароль" на 
корректность обработки исключений, а также то, что при вводе пароля, не соответствующего требованиям, при нажатии на 
кнопку "Зарегистрироваться" не происходит переход на страницу подтверждения email и выводится соответствующее 
предупреждение под полем. Относится к группе **_"negative"_**, в тесте используется параметризация.

**test_not_redirect_to_email_confirmation_with_mismatched_password_confirmation:** Проверка, что при несовпадении пароля, 
введенного в поле "Подтверждение пароля", с паролем из поля "Пароль" при нажатии на кнопку "Зарегистрироваться" не 
происходит переход на страницу подтверждения email и выводится соответствующее предупреждение под полем. Относится к 
группе **_"negative"_**.

**test_not_redirect_to_email_confirmation_with_registered_email_reuse:** Проверка, что при введении в форме регистрации 
email, который уже зарегистрирован в системе, форма выдаст соответствущее предупреждение и не произойдет переход на 
страницу подтверждения email. Относится к группе **_"negative"_**.

**test_not_redirect_to_phone_confirmation_with_registered_phone_reuse:** Проверка, что при введении в форме регистрации 
телефона, который уже зарегистрирован в системе, форма выдаст соответствущее предупреждение и не произойдет переход на 
страницу подтверждения телефона. Относится к группе **_"negative"_**.

_Запустить все тесты данного файла можно по команде:_
`python -m pytest test_registration_page.py`

------------------------------------------------------------------------------------------
Для запуска всех позитивных тест-кейсов проекта необходимо ввести команду (кроме позитивного теста, требующего ручного ввода капчи в процессе):
`pytest -v -m "positive"`

Для запуска тест-кейсов, требующих ручного ввода капчи, необходимо ввести команду: 
`pytest -v -m "captcha"`

Для запуска всех негативных тест-кейсов проекта необходимо ввести команду:
`pytest -v -m "negative"`

Для запуска всех тест-кейсов, проверяющих корректность структуры тестируемых страниц и форм в соответствии с требованиями необходимо ввести команду:
`pytest -v -m "structure"`

Для запуска всех тест-кейсов, проверяющих совершение перехода на требуемую страницу или форму необходимо ввести команду:
`pytest -v -m "redirect"`
